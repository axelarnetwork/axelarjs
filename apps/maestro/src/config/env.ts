import { Maybe } from "@axelarjs/utils";

import { map, split, trim, uniq } from "rambda";

export const NEXT_PUBLIC_SITE_URL = Maybe.of(
  process.env.NEXT_PUBLIC_SITE_URL
).mapOr("http://localhost:3000", String);

export const NEXT_PUBLIC_E2E_ENABLED =
  process.env.NEXT_PUBLIC_E2E_ENABLED === "true";

export const NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID = Maybe.of(
  process.env.NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID
).mapOr("", String);

export const NEXT_PUBLIC_NETWORK_ENV = String(
  process.env.NEXT_PUBLIC_NETWORK_ENV ?? "testnet"
) as "mainnet" | "testnet";

export const NEXT_PUBLIC_AXELAR_CONFIGS_URL = Maybe.of(
  process.env.NEXT_PUBLIC_AXELAR_CONFIGS_URL
).mapOr(
  "https://github.com/axelarnetwork/axelar-configs/blob/main/cli/wizard/commands/list-squid-token/README.md",
  String
);

export const NEXT_PUBLIC_INTERCHAIN_TOKEN_SERVICE_ADDRESS = Maybe.of(
  process.env.NEXT_PUBLIC_INTERCHAIN_TOKEN_SERVICE_ADDRESS
).mapOr("0x", String) as `0x${string}`;

export const NEXT_PUBLIC_INTERCHAIN_TOKEN_FACTORY_ADDRESS = Maybe.of(
  process.env.NEXT_PUBLIC_INTERCHAIN_TOKEN_FACTORY_ADDRESS
).mapOr("0x", String) as `0x${string}`;

export const NEXT_PUBLIC_EXPLORER_URL = Maybe.of(
  process.env.NEXT_PUBLIC_EXPLORER_URL
).mapOr("", String);

export const NEXT_PUBLIC_FILE_BUG_REPORT_URL = Maybe.of(
  process.env.NEXT_PUBLIC_FILE_BUG_REPORT_URL
).mapOr("", String);

export const NEXT_PUBLIC_VERCEL_URL = Maybe.of(
  process.env.NEXT_PUBLIC_VERCEL_URL
).mapOr("http://localhost:3000", String);

export const NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA = Maybe.of(
  process.env.NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA
).mapOr("", String);

export const NEXT_PUBLIC_GA_MEASUREMENT_ID = Maybe.of(
  process.env.NEXT_PUBLIC_GA_MEASUREMENT_ID
).mapOr("", String);

export const NEXT_PUBLIC_DISABLE_AUTH =
  process.env.NODE_ENV === "development" &&
  Maybe.of(process.env.NEXT_PUBLIC_DISABLE_AUTH).mapOr("false", String) ===
    "true";

export const NEXT_PUBLIC_INTERCHAIN_TRANSFER_GAS_LIMIT = Maybe.of(
  process.env.NEXT_PUBLIC_INTERCHAIN_TRANSFER_GAS_LIMIT
).mapOr(150000, Number);

// Pick from a sample interchain-transfer transaction https://sepolia.basescan.org/tx/0x54f040456df1711dbf31bf1cb1daa7acb82d1bca495ef443758c2759f9625716
const DEFAULT_INTERCHAIN_TRANSFER_EXECUTE_DATA =
  "0x49160658894cb2826b06d326a8008a3a66bbcb6f5992ac1f1a885d7577932d74d9fbbc02000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000094176616c616e6368650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a3078423546423442453032323332423162424134644338663831646332344332363938306445396533430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000000dc04fedabe3d0f56dba44980b7700fe3d140e57a9a7ad6739fb3affc11d8606800000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000009b84561e3768e2e5b1d404000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000014a57adce1d2fe72949e4308867d894cd7e7de0ef20000000000000000000000000000000000000000000000000000000000000000000000000000000000000014a57adce1d2fe72949e4308867d894cd7e7de0ef20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

export const NEXT_PUBLIC_INTERCHAIN_TRANSFER_EXECUTE_DATA = Maybe.of(
  process.env.NEXT_PUBLIC_INTERCHAIN_TRANSFER_EXECUTE_DATA
).mapOr(DEFAULT_INTERCHAIN_TRANSFER_EXECUTE_DATA, String);

export const NEXT_PUBLIC_INTERCHAIN_DEPLOYMENT_GAS_LIMIT = Maybe.of(
  process.env.NEXT_PUBLIC_INTERCHAIN_DEPLOYMENT_GAS_LIMIT
).mapOr(1000000, Number);

// Pick from a sample interchain deployment transaction https://sepolia.basescan.org/tx/0x6ef27a7d27f29380a9d518197bf98733e4f9ef44f6050ab1d10de9dafba3564c
const INTERCHAIN_DEPLOYMENT_EXECUTE_DATA =
  "0x491606581679e179f1c14fd19c93d450e678992a9b0d1b9ef3f3da9a54e8469b6bd9cf06000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000094176616c616e6368650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a3078423546423442453032323332423162424134644338663831646332344332363938306445396533430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000001dc04fedabe3d0f56dba44980b7700fe3d140e57a9a7ad6739fb3affc11d8606800000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000000027878000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000263630000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000014a57adce1d2fe72949e4308867d894cd7e7de0ef2000000000000000000000000";

export const NEXT_PUBLIC_INTERCHAIN_DEPLOYMENT_EXECUTE_DATA = Maybe.of(
  process.env.NEXT_PUBLIC_INTERCHAIN_DEPLOYMENT_EXECUTE_DATA
).mapOr(INTERCHAIN_DEPLOYMENT_EXECUTE_DATA, String);

export const NEXT_PUBLIC_DISABLED_CHAINS = Maybe.of(
  process.env.NEXT_PUBLIC_DISABLED_CHAINS
)
  .map(split(","))
  .map(uniq)
  .mapOr([], map(trim));

export const NEXT_PUBLIC_DISABLED_WALLET_IDS = Maybe.of(
  process.env.NEXT_PUBLIC_DISABLED_WALLET_IDS
)
  .map(split(","))
  .mapOr([], map(trim));

export const NEXT_PUBLIC_GIT_BRANCH = Maybe.of(
  process.env.NEXT_PUBLIC_GIT_BRANCH
).mapOr("main", String);

export const NEXT_PUBLIC_COMPETITION_START_TIMESTAMP = Maybe.of(
  process.env.NEXT_PUBLIC_COMPETITION_START_TIMESTAMP
).mapOr("", String);

export const NEXT_PUBLIC_COMPETITION_END_TIMESTAMP = Maybe.of(
  process.env.NEXT_PUBLIC_COMPETITION_END_TIMESTAMP
).mapOr("", String);

export const NEXT_PUBLIC_ENABLED_FEATURES = Maybe.of(
  process.env.NEXT_PUBLIC_ENABLED_FEATURES
).mapOr([], (val) => String(val).split(","));

export const shouldDisableSend = (
  axelarChainId: string,
  tokenAddress: `0x${string}`
) => {
  const shouldDisable: Record<string, Record<`0x${string}`, boolean>> = {
    optimism: { "0x4200000000000000000000000000000000000042": true },
  };
  return shouldDisable[axelarChainId]?.[tokenAddress];
};

export const NEXT_PUBLIC_CLAIM_OWNERSHIP_FORM_LINK = Maybe.of(
  process.env.NEXT_PUBLIC_CLAIM_OWNERSHIP_FORM_LINK
).mapOr(
  "https://docs.google.com/forms/u/0/d/1EoA2eYA5OK_BagoB4lgqiS67hIiDpZ7ssov1UUksD_Y/viewform",
  String
);

export const ClaimOwnershipFormFieldIds = {
  tokenAddress: "entry.263424059",
  tokenType: "entry.2010215617",
  allChains: "entry.414624060",
  sourceChain: "entry.373826717",
};
